<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Sarabun', sans-serif; }
    .card { background:#fff; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,.06); }
    table { width:100%; border-collapse: collapse; }
    th, td { border-bottom:1px solid #e5e7eb; padding:10px 8px; text-align:left; }
    th { background:#f8fafc; font-weight:600; }
    .pill { display:inline-block; padding:2px 8px; border-radius:999px; background:#eef2ff; color:#3730a3; font-size:12px; }
    .btn { padding:8px 12px; border-radius:8px; font-weight:600; }
    .btn-primary { background:#3b82f6; color:#fff; }
    .btn-outline { border:1px solid #cbd5e1; color:#0f172a; background:#fff; }
    .btn-danger { background:#ef4444; color:#fff; }
    .grid-cards { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; }
    @media (max-width: 960px){ .grid-cards { grid-template-columns: 1fr; } }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-6">
    <div class="container mx-auto px-4">
      <h1 class="text-2xl md:text-3xl font-bold">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h1>
      <p class="opacity-90 mt-1">‡∏î‡∏π/‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ü‡∏≠‡∏£‡πå‡∏° ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</p>
    </div>
  </div>

  <!-- Controls -->
  <div class="container mx-auto px-4 mt-6 grid md:grid-cols-3 gap-4">
    <div class="card p-4">
      <label class="block text-sm text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <input type="date" id="pickDate" class="w-full border rounded-lg px-3 py-2">
      <div class="mt-3 flex gap-2">
        <button id="btnView" class="btn btn-primary">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        <button id="btnPrintForm" class="btn btn-outline">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
      </div>
      <div class="mt-4 text-sm text-gray-600">
        <span class="pill" id="dayBadge">‚Äî</span>
        <div class="mt-1">‡∏£‡∏ß‡∏°‡∏Ñ‡∏≤‡∏ö‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô: <b id="totalPeriods">0</b> | ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î: <b id="totalAbsent">0</b></div>
      </div>
    </div>

    <div class="card p-4 md:col-span-2">
      <div class="flex flex-wrap gap-3 items-end">
        <div class="flex-1 min-w-[180px]">
          <label class="block text-sm text-gray-700 mb-1">‡∏Å‡∏£‡∏≠‡∏á: ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥</label>
          <select id="filterAbsent" class="w-full border rounded-lg px-3 py-2">
            <option value="">-- ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î --</option>
          </select>
        </div>
        <div class="flex-1 min-w-[180px]">
          <label class="block text-sm text-gray-700 mb-1">‡∏Å‡∏£‡∏≠‡∏á: ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô</label>
          <select id="filterSub" class="w-full border rounded-lg px-3 py-2">
            <option value="">-- ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î --</option>
          </select>
        </div>
        <div class="ml-auto flex gap-2">
          <button id="btnExport" class="btn btn-outline">üì• ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å CSV</button>
          <button id="btnClearFilters" class="btn btn-outline">‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Main content -->
  <div class="container mx-auto px-4 mt-6 grid md:grid-cols-3 gap-4">
    <!-- Left: recent dates -->
    <div class="card p-4">
      <div class="flex justify-between items-center mb-2">
        <h2 class="font-semibold">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
        <button id="btnReloadDates" class="text-sm text-indigo-600 hover:underline">‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà</button>
      </div>
      <div id="recentDates" class="space-y-2 text-sm">
        <!-- auto list -->
      </div>
    </div>

    <!-- Right: table -->
    <div class="md:col-span-2 card p-4">
      <div class="flex justify-between items-center mb-3">
        <h2 class="font-semibold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô</h2>
        <div class="text-sm text-gray-600" id="resultInfo">‚Äî</div>
      </div>
      <div class="overflow-x-auto">
        <table>
          <thead>
            <tr>
              <th>‡∏Ñ‡∏≤‡∏ö</th>
              <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
              <th>‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</th>
              <th>‡∏ä‡∏±‡πâ‡∏ô</th>
              <th>‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô</th>
              <th>‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥</th>
              <th>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏</th>
            </tr>
          </thead>
          <tbody id="rowsBody">
            <!-- auto rows -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script type="module" src="history.js"></script>
</body>
</html>
